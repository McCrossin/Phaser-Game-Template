# Project Structure Guide

Understanding the organization and architecture of the Phaser Game Template (Release • August 2025).

## Overview

The template follows modern JavaScript project conventions with game-specific optimizations for scalability, maintainability, and performance.

## Root Directory Structure

```
Phaser-Game-Template/
├── assets/                      # Game assets (processed + source)
├── config/                      # Build, deployment, development, monitoring
├── docs/                        # Documentation (developers, features, setup, etc.)
├── environments/                # Environment-specific configs
├── src/                         # TypeScript source code
├── testing/                     # Test files, configs, fixtures
├── tools/                       # Build, development, monitoring utilities
├── vite-plugins/                # Custom Vite plugins (assets pipeline)
├── .github/                     # CI workflows
├── .husky/                      # Git hooks
├── dist/                        # Build output
├── coverage/                    # Coverage output
├── index.html                   # Main HTML entry point
├── Dockerfile                   # Containerized build/runtime
├── docker-compose.yml           # Dev container orchestration
├── nginx.conf                   # Nginx production config
├── package.json                 # Project configuration (npm scripts)
├── package-lock.json
├── project.config               # Template metadata
├── README.md                    # Project overview
└── thumbnail.png                # Repo thumbnail
```

## Source Code Organization (`src/`)

### Core Structure

```
src/
├── main.ts                      # Application entry point (Phaser init)
├── config/                      # Game configuration
│   ├── AssetConfig.ts
│   ├── DebugConfig.ts
│   ├── GameConfig.ts
│   └── game.config.ts
├── ecs/                         # Entity-Component-System
│   ├── Component.ts
│   ├── Entity.ts
│   ├── EntityManager.ts
│   ├── System.ts
│   └── World.ts
├── scenes/                      # Phaser scenes
│   ├── StartScene.ts
│   └── GameScene.ts
├── systems/                     # Game systems
│   ├── AssetLoader.ts
│   ├── CoreSystems.ts
│   └── SaveGameManager.ts       # Persistence scaffold
├── gameObjects/                 # Core template components
│   └── CoreComponents.ts
├── types/                       # Type definitions
│   ├── AssetTypes.ts
│   ├── BuildTypes.ts
│   ├── GameTypes.ts
│   ├── global.d.ts
│   └── template-structure.ts
├── utils/                       # Utility functions
│   ├── AsyncGameLoader.ts
│   ├── Constants.ts
│   ├── SimpleFPSCounter.ts
│   └── Utils.ts
└── scripts/                     # Dev/performance scripts (TS)
  ├── ci-environment-setup.sh
  ├── deploy-simple.sh
  ├── performance-check.ts
  ├── performance-check-js-backup.js
  └── test-performance-analyzer.ts
```

Note: The template does not ship with player/enemy component folders; add your own feature folders as needed.

## Asset Organization (`assets/`)

### Asset Directory Structure

```
assets/
├── source/                      # Original source assets (checked-in examples)
│   ├── sprites/
│   └── ui/
└── processed/                   # Build-optimized assets (generated)
  ├── asset-manifest.json      # Generated by vite-plugins/asset-manifest.ts
  ├── atlases/                 # Packed texture atlases (sprites.json/png, ui.json/png)
  ├── sprites/                 # Optimized sprites (png/webp)
  └── ui/                      # Optimized UI textures (webp/png)
```

### Asset Naming Conventions

```
# Images
player_idle_01.png              # Character animations
bg_forest_layer_01.png          # Background layers
ui_button_start_normal.png      # UI elements
fx_explosion_spritesheet.png    # Effect animations

# Audio (not included in template by default)
music_main_menu.ogg             # Background music
sfx_player_jump.wav             # Sound effects
voice_narrator_intro.mp3        # Voice lines

# Data
level_01_config.json            # Level data
enemy_stats.json                # Game balance data
ui_text_en.json                 # Localization
```

## Configuration Structure (`config/`)

### Configuration Organization

```
config/
├── build/                       # Build configuration
│   ├── assets/processed/atlases/  # Example generated atlases
│   ├── optimization.config.ts
│   ├── tsconfig.json             # Typecheck config (used by npm run typecheck)
│   ├── tsconfig.build.json       # Build config (used by npm run build)
│   ├── typedoc.json              # TypeDoc config
│   └── vite.config.ts            # Vite build/dev config
├── deployment/                  # Deployment configuration
│   ├── config.ts
│   └── simple/
├── development/                 # Development tooling
│   └── eslint.config.mjs        # ESLint configuration
├── monitoring/                  # Monitoring thresholds/config
│   └── game-performance.json
└── ci-performance-thresholds.json
```

## Documentation Structure (`docs/`)

### Documentation Organization

```
docs/
├── README.md
├── setup/
│   ├── quick-start.md
│   ├── detailed-setup.md
│   ├── directory-structure.md
│   ├── requirements.md
│   └── troubleshooting.md
├── developers/
│   ├── getting-started.md
│   ├── coding-standards.md
│   ├── architecture-overview.md
│   └── file-structure-migration-summary.md
├── development/
│   ├── project-structure.md     # This file
│   ├── brownfield-architecture.md
│   └── implementation-architecture.md
├── features/
│   ├── overview.md
│   ├── build-system.md
│   ├── ci-cd-pipeline.md
│   ├── health-monitoring.md
│   └── performance-tools.md
├── monitoring/README.md
├── quality-assurance/
│   ├── README.md
│   └── quality-standards.md
├── checklists/performance-testing.md
├── customization/new-project-setup.md
└── examples/basic-game.md
```

## Testing Structure (`testing/`)

### Test Organization

```
testing/
├── core/
│   ├── config/                  # Vitest/Playwright configs
│   │   ├── vitest.config.ts
│   │   ├── vitest.validation.config.ts
│   │   ├── playwright.config.ts
│   │   ├── playwright-ci.config.ts
│   │   └── timeout-configuration.ts
│   ├── fixtures/
│   │   └── gameTestUtils.ts
│   ├── helpers/                 # Test helpers and monitors
│   │   ├── performance-helpers.ts
│   │   ├── test-isolation.ts
│   │   └── test-monitor.ts
│   ├── integration/
│   │   ├── template-structure.test.ts
│   │   └── test-orchestration.ts
│   ├── unit/                    # Unit tests by domain
│   │   ├── build/bundle-optimization.test.ts
│   │   ├── config/GameConfig.test.ts
│   │   ├── performance/
│   │   │   ├── environment-detector.test.ts
│   │   │   └── performance-analyzer.test.ts
│   │   ├── systems/
│   │   │   ├── AssetLoader.test.ts
│   │   │   └── SaveGameCompatibility.test.ts
│   │   ├── utils/SimpleFPSCounter.test.ts
│   │   └── code-quality/temp-020-validation.test.ts
│   └── setup.ts
└── advanced/
  └── e2e/
    ├── performance/         # Performance test utilities
    │   └── game-performance.test.ts
    ├── performance.spec.ts
    ├── performance.spec.ts.disabled
    └── debug-game.spec.ts
```

Note: A legacy `tests/` folder exists but is unused by current scripts. Prefer `testing/`.

## Build Output Structure (`dist/`)

### Production Build Structure

```
dist/
├── index.html                   # Main HTML file
├── assets/                      # Bundled assets (hashed)
├── *.js                         # Bundles (hashed)
├── *.css                        # Styles (hashed)
└── manifest.webmanifest         # If enabled
```

## File Naming Conventions

### TypeScript Files

```
# Classes (PascalCase)
GameScene.ts
PlayerComponent.ts
MovementSystem.ts

# Utilities and functions (camelCase)
mathUtils.ts
assetLoader.ts
debugHelper.ts

# Configuration files (camelCase + Config suffix)
gameConfig.ts
physicsConfig.ts
audioConfig.ts

# Type definitions (PascalCase + Types suffix)
GameTypes.ts
ComponentTypes.ts
SceneTypes.ts
```

### Component Organization

```
# Group related components
components/
├── player/                      # Player-related components
│   ├── PlayerInput.ts
│   ├── PlayerMovement.ts
│   └── PlayerHealth.ts
├── enemies/                     # Enemy components
│   ├── EnemyAI.ts
│   ├── EnemyPatrol.ts
│   └── EnemyAttack.ts
└── common/                      # Shared components
    ├── Transform.ts
    ├── Velocity.ts
    └── Collider.ts
```

## Code Organization Patterns

### Scene Organization

```typescript
// scenes/GameScene.ts
export class GameScene extends Phaser.Scene {
  // Constants at the top
  private static readonly SCENE_KEY = 'GameScene';
  
  // Properties grouped by type
  private player!: Phaser.GameObjects.Sprite;
  private enemies: Phaser.GameObjects.Group;
  private ui: Phaser.GameObjects.Container;
  
  // Lifecycle methods in order
  constructor() { /* ... */ }
  preload() { /* ... */ }
  create() { /* ... */ }
  update() { /* ... */ }
  
  // Private methods grouped by function
  private initializePlayer() { /* ... */ }
  private setupEnemies() { /* ... */ }
  private createUI() { /* ... */ }
  
  // Event handlers
  private onPlayerHit() { /* ... */ }
  private onEnemyDefeated() { /* ... */ }
}
```

### Component Organization

```typescript
// components/common/Transform.ts
export interface Transform {
  x: number;
  y: number;
  rotation: number;
  scaleX: number;
  scaleY: number;
}

export class TransformComponent implements Transform {
  constructor(
    public x = 0,
    public y = 0,
    public rotation = 0,
    public scaleX = 1,
    public scaleY = 1
  ) {}
  
  // Methods for transform operations
  setPosition(x: number, y: number): void { /* ... */ }
  rotate(angle: number): void { /* ... */ }
  scale(factor: number): void { /* ... */ }
}
```

### System Organization

```typescript
// systems/MovementSystem.ts
export class MovementSystem {
  // Dependencies injected in constructor
  constructor(
    private world: World,
    private physics: Phaser.Physics.Matter.World
  ) {}
  
  // Main update method
  update(deltaTime: number): void {
    const entities = this.world.getEntitiesWith([Transform, Velocity]);
    
    for (const entity of entities) {
      this.updateEntityMovement(entity, deltaTime);
    }
  }
  
  // Private implementation methods
  private updateEntityMovement(entity: Entity, deltaTime: number): void {
    // Movement logic
  }
}
```

## Import Organization

### Import Order

```typescript
// 1. Node modules
import { Scene, GameObjects } from 'phaser';
import { v4 as uuid } from 'uuid';

// 2. Internal modules (absolute paths)
import { GameConfig } from '@/config/GameConfig';
import { Transform } from '@/components/common/Transform';

// 3. Relative imports
import { Player } from './Player';
import { Enemy } from './Enemy';

// 4. Type-only imports (separate)
import type { GameState } from '@/types/GameTypes';
import type { ComponentType } from '@/types/ComponentTypes';
```

### Path Aliases

Configured in `config/build/tsconfig.json`:

```jsonc
{
  "compilerOptions": {
    "baseUrl": "../../src",
    "paths": {
      "@/*": ["*"],
      "@/scenes/*": ["scenes/*"],
      "@/systems/*": ["systems/*"],
      "@/components/*": ["components/*"],
      "@/entities/*": ["entities/*"],
      "@/utils/*": ["utils/*"],
      "@/types/*": ["types/*"]
    }
  }
}
```

Note: Some aliases (components/entities) are reserved for future modules; use existing folders like `gameObjects` as needed.

## Best Practices

### File Organization

1. **Single Responsibility**: One class/interface per file
2. **Logical Grouping**: Related files in same directory
3. **Clear Naming**: Descriptive, consistent naming conventions
4. **Import Organization**: Clean, organized imports

### Directory Structure

1. **Shallow Hierarchy**: Avoid deep nesting (max 3-4 levels)
2. **Feature-based**: Group by feature, not by file type
3. **Consistent Naming**: Use consistent naming patterns
4. **Clear Separation**: Separate concerns clearly

### Code Organization

1. **Dependency Injection**: Inject dependencies rather than importing
2. **Interface Segregation**: Small, focused interfaces
3. **Composition over Inheritance**: Favor composition patterns
4. **Clear Boundaries**: Well-defined module boundaries

---

**Next Steps:**
- See `docs/developers/getting-started.md` for onboarding
- See `docs/features/build-system.md` for build details
- See `docs/examples/basic-game.md` for a minimal example
